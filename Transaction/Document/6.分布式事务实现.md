### 使用Spring JTA
1. 通过应用服务器提供JTA事务管理,如JBoss
2. 通过第三方事务管理器,如 `Atomikos`, `Bitronix` 等

Atomikos: 新建个线程,调用Spring提供的事务管理器,使用两阶段提交,完成事务同步,但是性能较差.

### 多数据源事务同步方式
#### XA与最后资源博弈
`XA`是指其中一个数据库支持 `JTA` 事务. 先提交非`JTA`事务,再提交`JTA`事务.这样,如果中途炸了,可以在最后的`JTA`事务中回滚.

#### 共享资源
不同事务间共享同一个底层资源,如将消息和数据都存入数据库中.需要消息服务支持数据库管理.

#### 最大努力一次提交
将多个事务,尽可能依次同步提交,减少出错概率.
在多个事务中,引入消息重试机制,如果事务炸了,尝试再次重试..需要考虑数据重复操作问题.

#### 链式事务
定义一个事务链,多个事务在一个事务管理器中依次执行.

### 选择
强一次性: JTA(性能查,限于单次服务)
弱一次性/最终一次性: 最大努力一次提交,链式事务.(需要设计事务处理机制)


## 链式事务管理器
多数据源的数据库事务处理,尝试将其通过链式管理分次提交.

参考项目 dxt-db-db
参考项目 dxt-db-jpa
## 最大努力一次提交
将ActiveMQ的消息同步到数据库中,保持事务一致.
将数据库存入后,放入消息中.
参考项目 dxt-db-jms 

